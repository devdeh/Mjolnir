#include <AccelStepper.h>
#include <MultiStepper.h>

#define MOTOR_X_ENABLE_PIN 8
#define MOTOR_X_STEP_PIN 2
#define MOTOR_X_DIR_PIN 5

#define MOTOR_Y_ENABLE_PIN 8
#define MOTOR_Y_STEP_PIN 3
#define MOTOR_Y_DIR_PIN 6

#define MOTOR_Z_ENABLE_PIN 8
#define MOTOR_Z_STEP_PIN 4
#define MOTOR_Z_DIR_PIN 7

AccelStepper motor_X(1, MOTOR_X_STEP_PIN, MOTOR_X_DIR_PIN);
AccelStepper motor_Y(1, MOTOR_Y_STEP_PIN, MOTOR_Y_DIR_PIN);
AccelStepper motor_Z(1, MOTOR_Z_STEP_PIN, MOTOR_Z_DIR_PIN);
MultiStepper steppers;

void setup()
{  
    Serial.begin(9600);

    motor_X.setEnablePin(MOTOR_X_ENABLE_PIN);
    motor_Y.setEnablePin(MOTOR_Y_ENABLE_PIN);
    motor_Z.setEnablePin(MOTOR_Z_ENABLE_PIN);

    motor_X.setPinsInverted(false, false, true);
    motor_Y.setPinsInverted(false, false, true);
    motor_Z.setPinsInverted(false, false, true);

    motor_X.setAcceleration(20); 
    motor_Y.setAcceleration(20); 
    motor_Z.setAcceleration(20); 
    
    motor_X.setMaxSpeed(200.0);
    motor_Y.setMaxSpeed(200.0);
    motor_Z.setMaxSpeed(200.0);

    motor_X.enableOutputs();
    motor_Y.enableOutputs();
    motor_Z.enableOutputs();

    //Add them to multistepper:
    steppers.addStepper(motor_X);
    steppers.addStepper(motor_Y);
    steppers.addStepper(motor_Z);
}



void loop()
{

long positions[3];
positions[0] = 0;
positions[1] = 0;
positions[2] = 0;

steppers.moveTo(positions);
steppers.runSpeedToPosition();


    
}
